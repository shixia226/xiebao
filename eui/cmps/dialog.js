EUI.defineCmp("dialog",["panel","float","button"],function(t,i,e,s){"use strict";function n(t){t=s.extend({},r,t),n._superClass.call(this,t),this.addButton(t.btns)}var o=function(t,i){return!i._property._activeminibtn_},a=function(t,i,n){var o=n.onclick;return s.isString(o)&&(o=t[o]),new e({pelem:i,caption:n.caption,icon:n.icon,arrow:n.arrow,data:n.data,onclick:o,context:t,args:[].concat(n.args)})},r={width:!1,height:200,cls_container:"ui-dialog",cls_header:"ui-dialog-header",cls_content:"ui-dialog-content",cls_icon:"ui-icon ui-dialog-icon",cls_caption:"ui-dialog-caption",cls_btns:"ui-dialog-btns",cls_btn:"ui-icon ui-dialog-btn",cls_actbtn:"ui-dialog-btn-hover",miniBtnsConfig:{close:{cls:"font-icon-close",hint:"关闭",handler:function(){this.hide()}},max:{cls:"font-icon-max",handler:function(){var t=this.getProperty("restoresize"),i=this.getContainer();t?(s.removeClass(this,"ui-dialog-btn-restore"),s.addClass(this,"ui-dialog-btn-max"),this.setProperty("restoresize"),this.setWidth(t.width),this.setHeight(t.height),i.style.cssText+="; left: "+t.left+"; top: "+t.top+";"):(s.removeClass(this,"ui-dialog-btn-max"),s.addClass(this,"ui-dialog-btn-restore"),this.setProperty("restoresize",{left:s.css(i,"left"),top:s.css(i,"top"),width:this.getWidth(),height:this.getHeight()}),this.setWidth("100%"),this.setHeight("100%"),i.style.cssText+="; left: 0px; top: 0px;")}}},onContainerInit:function(t,i){},oninittail:function(t,i,e,n){if(s.draggable(e.header,{helper:"parent",ondragbefore:o,args:this}),!1!==n.bottom){var a=e.tail=t.appendChild(i.createElement("div"));a.className="ui-dialog-tail",a.innerHTML='<div class="ui-dialog-btns-left"></div><div class="ui-dialog-btns-right"></div>',e.btnsLeft=a.firstChild,e.btnsRight=a.lastChild,e.buttons=[]}else s.addClass(t,"ui-dialog-no-tail")}};return s.inherit(n,t,{dispose:function(){var t=this._property,i=t.header;i&&(s.draggable(i),t.miniBtns&&s.unbind(t.miniBtnsDom,".dialog")),n._superClass.prototype.dispose.call(this)},isVisible:i.prototype.isVisible,show:function(t){return!0===t&&s.showDisablePanel({doc:this.doc,id:"dialog",restorekey:this._property.cmpid,cls:"ui-disable-panel"}),i.prototype.show.call(this)},hide:function(){return s.hideDisablePanel("dialog",this._property.cmpid),i.prototype.hide.call(this)},getButton:function(t){var i=this._property,e=i.buttons;if(e){if(s.isString(t))for(var n=0,o=e.length;n<o;n++){var a=e[n];if(a.getCaption()===t)return a}return e[t]}},addButton:function(t){if(t){var i=this._property,e=i.buttons;if(e){var n=!0===arguments[1]?i.btnsLeft:i.btnsRight,o=this.doc;if(!s.isArray(t)){n.appendChild(o.createElement("span")).style.marginRight="6px";var r=a(this,n,t);return e.push(r),r}for(var l=0,d=t.length;l<d;l++)n.appendChild(o.createElement("span")).style.marginRight="6px",e.push(a(this,n,t[l]))}}}}),n});